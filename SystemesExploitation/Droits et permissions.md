## Droits et permissions. 



Par défaut, quel que soit le système d'exploitation utilisé, chaque fichier et répertoire a un droit d’accès et des permissions. 

Nous allons, dans ce TP, nous intéresser aux droits et permissions sous Linux. 

Pour cela, nous allons à nouveau utiliser le simulateur linux : [web_linux](http://s-macke.github.io/jor1k/demos/main.html?user=XjgQbmJywo&cpu=asm&n=1&relayURL=wss%3A%2F%2Frelay.widgetry.org%2F)tpp://weblinux.univ-reunion.fr



#### I. Droits et groupes.

​	

Linux sépare le monde en trois catégories du point de vue des droits :

- ​	l'utilisateur (user)
- ​	le groupe (group)
- ​	le reste du monde (others).  



Partons d'un exemple. 

Dans Tilix, entrer la commande ls -l. 

Vous obtenez normalement la liste suivante (à la date prêt....j'ai préparé ce TP le 9 avril). 

![](/SystemesExploitation/IMG/image.jpg)



La commande ls permet de lister tous les répertoires et documents disponibles à partir du dossier courant. L'option -l donne la version longue et précise un certain nombre de choses, dont les droits sur ces documents. 



Détaillons le résultat de la première ligne. 



drwxr-xr-x	1 alice		user		 	Apr 9  08:11 Books



La première partie concerne les droits. 

drwxr-xr-x

d concerne la nature du document : d pour répertoire ou – s'il s'agit d'un fichier

rwx, le premier triplet concerne les droits de l'utilisateur.

r-x le deuxiéme triplet concerne les droits du groupe

r-x le troisiéme triplet concerne les droits des autres



Chaque partie est elle-même composée de trois lettres :

- ​	droit de lecture : r
- ​	droit d'écriture : w
- ​	droit d’exécution : x



Ces droits n’ont pas la même signification pour un répertoire ou pour un fichier.





​	Pour les fichiers :

 	- lecture (r) : on peut lire le fichier avec un éditeur par exemple ;

 	- écriture (w) : on peut modifier le contenu du fichier ;

 	- exécution (x) : on peut exécuter le fichier si c’est possible (script, programme…).



​	Pour les répertoires :

 	- lecture (r) : on peut afficher le contenu du répertoire ;

 	- écriture (w) : on peut créer, supprimer, renommer les fichiers de ce répertoire (même si 	nous n’avons pas le droit d’écrire dans les fichiers) ;

 	- exécution (x) : on peut accéder ou traverser le répertoire (par exemple avec cd).



Dans notre exemple, cela signifie donc que ce document est un répertoire, que l'utilisateur peut lire, écrire et y accéder (ou le traverser), que les membres du groupe ainsi que les autres peuvent lire et y accéder. 



alice est l'utilisateur

users est  le groupe ayant accés à ce fichier.



 0 représente la taille de mon fichier (ici, c'est 0 puisque l'on a un repertoire, on peut observer que dans le cas d'un document comme dans fichier1.txt, le document a un taille de 3024 octets). 



Apr 09 8:11, heure de la dernière modification  du fichier (ou de dernière modification). 



Books : nom du fichier ou du répertoire.



A faire vous même 1 : 

De la même manière que moi, détailler les droits ainsi que la nature des fichiers : fichier2.txt et imdb. 











A faire vous même 2 : Quel sont les droits des utilisateurs suivants sur le fichier tutu ?



-rwxr-xr-x 2 jean 1g4 4096 sept. 10 12:22 tutu



 \- eleve :

 \- jean :

 \- thomas qui appartient au groupe 1g4 :





 

1. ​	Changer des droits.



Le propriétaire d'un fichier (ou utilisateur) peut changer ses permissions d’accès au groupe. Cela peut être particulièrement utile dans le cas d'un travail de groupe pas exemple. 

Pour cela, il peut utiliser la commande chmod. 



A faire vous même 3:

Exécuter la commande chmod g+w Books

Exécuter ensuite la commande ls -l. 

Que constatez vous concernant la ligne Books ?



Voici quelques exemples :

chmod g+r fichier1.txt donne les droits de lecture du fichier1.txt au groupe g 

chmod u-w fichier1.txt enlève les droits d'écriture au propriétaire u

chmod o-x fichier.txt enlève les droits d’exécutions du fichier1.txt  aux autres. 

Chmod ugo+x fichier1.txt donne tous les droits d’exécution à tous





A faire vous même 4 :

Indiquer les lignes de commande à exécuter pour :

1. ​	retirer les droits d’exécution à tous pour fichier2.txt:
2. ​	ajouter les droits d'écriture du groupe pour fichier2.txt



Il est, de plus, possible de combiner plusieurs instructions :



A faire vous même 5 :

Que fait la commande suivante ?



chmod u-x,g+x,o-rwx fichier1.txt





III. Changer les propriétaires



La commande pour changer d’utilisateur propriétaire est **chown** (change owner) : 



chown momo fichier



ici momo devient le propriétaire du fichier



Pour changer de groupe on utilise la commande chgrp (change group) :



chgrp groupe1 fichier



ici groupe1 devient le nouveau groupe propriétaire du ficher.



Seul utilisateur  peut changer le propriétaire d’un fichier. L’utilisateur et le groupe doivent exister lors du changement. Et le propriétaire doit appartenir au groupe pour changer un fichier de groupe. Seul utilisateur  peut attribuer n’importe quel groupe à un fichier.



Vous ne pourrez pas tester ces commandes en ligne. 
